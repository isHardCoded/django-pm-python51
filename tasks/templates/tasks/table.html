{% extends 'base/base.html' %}

{% block panel %}
        <div class="flex flex-col gap-4 md:flex-row md:items-start justify-between rounded-lg shadow-md mb-5 p-2 bg-white">
            <form method="GET" class="flex items-center gap-3">
            <select class="text-sm border rounded-md border-gray-300 py-1 px-2 bg-white" name="status" id="">
                <option class="text-sm" value="">Все</option>
                <option class="text-sm" value="planning" {% if current_status == "planning" %}selected{% endif %}>Планируются</option>
                <option class="text-sm" value="progress" {% if current_status == "progress" %}selected{% endif %}>Выполняются</option>
            </select>

            <select class="text-sm border rounded-md border-gray-300 py-1 px-2 bg-white" name="sort" id="">
                <option class="text-sm" value="">Сортировать</option>
                <option class="text-sm" value="title" {% if current_sort == "title" %}selected{% endif %}>По названию</option>
                <option class="text-sm" value="deadline" {% if current_sort == "deadline" %}selected{% endif %}>По дедлайну</option>
            </select>

            <button class="bg-gray-100 text-sm px-3 py-1 rounded-md hover:bg-gray-200 cursor-pointer">Применить</button>
        </form>
            <div>
                <a href="{% url 'tasks_kanban' %}">Доска</a>
                <a href="{% url 'tasks_table' %}">Таблица</a>
                <a class="bg-indigo-500 p-1 rounded-md text-white hover:bg-indigo-600" href="{% url 'tasks_add' %}">Создать задачу</a>
            </div>
        </div>
{% endblock %}

{% block content %}
<div class="p-5 shadow-md rounded-lg bg-white">

    <table class="min-w-full border border-gray-300 rounded-md overflow-hidden">
        <thead class="bg-gray-100">
            <tr>
                <th class="px-4 py-2 border-b text-left">Статус</th>
                <th class="px-4 py-2 border-b text-left">Название</th>
                <th class="px-4 py-2 border-b text-left">Исполнитель</th>
                <th class="px-4 py-2 border-b text-left">Дедлайн</th>
            </tr>
        </thead>

        <tbody>

        {% if current_status == "planning" or current_status == "" or current_status == None %}
            {% for task in tasks_planning %}
                <tr class="hover:bg-gray-50 cursor-pointer transition">
                    <td class="px-4 py-2 border-b text-amber-700 font-semibold">
                        {{ status_planning }}
                    </td>
                    <td class="px-4 py-2 border-b font-bold">
                        {{ task.title }}
                    </td>
                    <td class="px-4 py-2 border-b text-gray-600">
                        {{ task.assign.username }}
                    </td>
                    <td class="px-4 py-2 border-b text-gray-600">
                        {{ task.deadline|date:"Y-m-d" }}
                    </td>
                </tr>
            {% endfor %}
        {% endif %}

        {% if current_status == "progress" or current_status == "" or current_status == None %}
            {% for task in tasks_progress %}
                <tr class="hover:bg-gray-50 cursor-pointer transition">
                    <td class="px-4 py-2 border-b text-blue-700 font-semibold">
                        {{ status_progress }}
                    </td>
                    <td class="px-4 py-2 border-b font-bold">
                        {{ task.title }}
                    </td>
                    <td class="px-4 py-2 border-b text-gray-600">
                        {{ task.assign.username }}
                    </td>
                    <td class="px-4 py-2 border-b text-gray-600">
                        {{ task.deadline|date:"Y-m-d" }}
                    </td>
                </tr>
            {% endfor %}
        {% endif %}

        </tbody>
    </table>

</div>
{% endblock %}